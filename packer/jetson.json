{
  "builders" : [
    {
      "type": "null",
      "ssh_host":     "{{user `host`}}",
      "ssh_username": "weeds",
      "ssh_password" : "{{user `sudo_password`}}",
      "ssh_pty" : "true"
    }
  ],
  "provisioners" : [
    {
      "type": "file",
      "source": "../jetson.tar",
      "destination": "~/jetson.tar"
    },
    {
      "type": "file",
      "source": "../post.tar",
      "destination": "~/post.tar"
    },
    {
      "type": "file",
      "source": "./install-jetson.sh",
      "destination": "~/install-jetson.sh"
    },
    {
      "type": "file",
      "source": "./install-uploader.sh",
      "destination": "~/install-uploader.sh"
    },
    {
      "type": "shell",
      "remote_folder": "~",
      "inline": [
        "echo nvidia-greydog | sudo -S bash -x ~/install-jetson.sh {{user `camera_address`}} {{user `nickname`}} {{user `name`}} {{user `server`}} {{user `position`}} {{user `location`}} {{user `camera_post`}}",
        "echo nvidia-greydog | sudo -S bash -x ~/install-uploader.sh",
        "rm ~/install-uploader.sh"
      ]
    }
  ]
}
