{
  "builders" : [
    {
      "type": "null",
      "ssh_host":     "{{user `host`}}",
      "ssh_username": "weeds",
      "ssh_password" : "{{user `sudo_password`}}",
      "ssh_pty" : "true"
    }
  ],
  "provisioners" : [
    {
      "type": "file",
      "source": "../rio.tar",
      "destination": "~/rio.tar"
    },
    {
      "type": "file",
      "source": "../post.tar",
      "destination": "~/post.tar"
    },
    {
      "type": "file",
      "source": "../controller.tar",
      "destination": "~/controller.tar"
    },
    {
      "type": "file",
      "source": "../http.tar",
      "destination": "~/http.tar"
    },
    {
      "type": "file",
      "source": "./install-daq.sh",
      "destination": "~/install-daq.sh"
    },
    {
      "type": "file",
      "source": "./install-uploader.sh",
      "destination": "~/install-uploader.sh"
    },
    {
      "type": "file",
      "source": "./install-controller.sh",
      "destination": "~/install-controller.sh"
    },
    {
      "type": "file",
      "source": "./install-http.sh",
      "destination": "~/install-http.sh"
    },
    {
      "type": "shell",
      "remote_folder": "~",
      "inline": [
        "echo {{user `sudo_password`}} | sudo -S bash -x ~/install-daq.sh {{user `pulses`}} {{user `server`}} {{user `position`}} {{user `forward`}} {{user `size`}} {{user `serial`}}",
        "echo {{user `sudo_password`}} | sudo -S bash -x ~/install-uploader.sh",
        "echo {{user `sudo_password`}} | sudo -S bash -x ~/install-controller.sh",
        "echo {{user `sudo_password`}} | sudo -S bash -x ~/install-http.sh",
        "rm ~/install-uploader.sh",
        "rm ~/install-daq.sh"
      ]
    }
  ]
}
